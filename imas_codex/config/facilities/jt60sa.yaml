# JT-60SA - Japan Torus 60 Super Advanced
#
# Public facility configuration for graph and mappings.
# Infrastructure data is in jt60sa_private.yaml (gitignored).

facility: jt60sa
name: JT-60SA
machine: JT60SA
description: Japan Torus 60 Super Advanced - Satellite tokamak facility
location: Naka, Japan

# SSH connection (user configures ~/.ssh/config with this alias)
ssh_host: jt60sa

# Data systems available at this facility
data_systems:
  - edas     # JT-60SA Experiment Data Access System (primary)
  - imas     # IMAS available via modules
  - mdsplus  # MDSplus available via modules
  - uda      # UDA available via modules

# Wiki/documentation sites
# JT60SA documentation is hosted on nakasvr23 behind IFERC VPN.
# Site 0: TWiki static export - analysis code documentation (TOPICS, EDAS, SLICE, etc.)
# Site 1: Server landing page - hardware, software, login, batch jobs, compilers
# Site 2: TWiki Main web - EDAS manuals, API docs, experiment reports (raw .txt via SSH)
wiki_sites:
  - url: https://nakasvr23.iferc.org/twiki_html
    portal_page: WebHome.html
    site_type: twiki_static
    access_method: vpn   # Only accessible when IFERC VPN is active
    auth_type: none      # No credentials — VPN is the access gate
    ssh_available: true  # SSH to jt60sa host also possible via VPN
    description: >-
      JT-60SA analysis code documentation and server guides.
      Contains TOPICS, EDAS, SLICE, equilibrium codes, hardware specs,
      login procedures, batch job usage. Mixed Japanese/English content.
    languages:
      - ja
      - en

  - url: https://nakasvr23.iferc.org
    portal_page: index-en.html
    site_type: static_html
    access_method: vpn
    auth_type: none
    ssh_available: true
    description: >-
      JT-60SA data analysis server (nakasvr23) system documentation.
      Hardware specs, software list, login procedures, batch job usage,
      compiler configuration, file system layout. Bilingual (JP/EN).
    languages:
      - ja
      - en
    exclude_prefixes:
      - /twiki_html      # Separate TWiki site
      - /matlab          # MATLAB vendor documentation
      - /idl             # IDL vendor documentation  
      - /pv-wave         # PV-WAVE vendor documentation
      - /analysis        # Analysis tools help (external)

  - url: /JT60SA_TWIKI/data/Main
    name: twiki_main
    site_type: twiki_raw
    data_path: /JT60SA_TWIKI/data/Main
    pub_path: /JT60SA_TWIKI/pub/Main
    web_name: Main
    access_method: vpn
    auth_type: none
    ssh_available: true
    description: >-
      JT-60SA Main TWiki web accessed via SSH. Contains EDAS tool manuals
      (eGIS, eSLICE, eSURF), Eddb API documentation (C/Fortran/Python wrappers),
      AnalysisDB and ExperimentDB system docs, discharge parameter handbook,
      and operational reports. Primary source for data access documentation.
      ~5400 topics total, ~300 substantive docs after filtering.
    languages:
      - ja
      - en
    # Skip bulk auto-generated/system pages during discovery
    exclude_patterns:
      - "^Web"             # TWiki system pages
      - "^DailyReport"     # ~3800 daily operation reports
      - "^ShotE"           # ~1200 shot reports
      - "^ShotA"           # ~70 shot reports
      - "Watchlist$"       # User watchlists
      - "Bookmarks$"       # User bookmarks
      - "^TWiki"           # TWiki admin pages
      - "Template$"        # Form templates
      - "^ExperimentChiefReport\\d"  # ~40 numbered experiment reports
      - "^OperationStatusReport\\d"  # ~18 numbered operation reports
      - "^DatabaseReport\\d"         # Numbered database reports
      - "^ProposalID\\d"             # Numbered proposals

# User info discovery configuration
user_info:
  name_format: last_first  # Japanese order: family name first (e.g., マッキントッシュ サイモン)
  lookup_tools:
    - getent
    - passwd
    - id
